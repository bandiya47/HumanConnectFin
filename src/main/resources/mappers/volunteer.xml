<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="dc.human.gbnb.humanConnect.center.dao.CenterRegDAO">
	<resultMap id="listCenterRegResult" type="centerRegVO">
		<result property="uId" column="C_ID" />
		<result property="v_no" column="V_NO" />
		<result property="vTitle" column="V_TITLE" />
		<result property="vStartDate" column="V_START_DATE" />
		<result property="vEndDate" column="V_END_DATE" />
		<result property="vStartTime" column="V_START_TIME" />
		<result property="vLastTime" column="V_LAST_TIME" />
		<result property="vRStartDate" column="V_RSTART_DATE" />
		<result property="vREndDate" column="V_REND_DATE" />
		<result property="vWorkingDay" column="V_WORKING_DAY" />
		<result property="vServiceCode" column="SERVICE_CODE" />
		<result property="vRegAmnt" column="V_REG_AMNT" />
		<result property="vUploadFilePath" column="V_UPLOAD_FILE_PATH" />
		<result property="vInfo" column="V_INFO" />
		<result property="vServiceType" column="service_type" />
	</resultMap>

	<resultMap id="vNoCenterRegResult" type="centerRegVO">
			<result property="v_no" column="v_no" />
	</resultMap>

	<resultMap id="listIdCenterRegResult" type="centerRegVO">
		<result property="cName" column="C_NAME" />
		<result property="cAddr1" column="C_ADDR1" />
		<result property="cAddr2" column="C_ADDR2" />
	</resultMap>

	<select id="selectCenterRegList" parameterType="int" resultMap="listCenterRegResult">
		<![CDATA[
		   SELECT
		    v.C_ID,
		    v.V_NO,
			v.V_TITLE,
			v.V_START_DATE,
			v.V_END_DATE,
			v.V_START_TIME,
			v.V_LAST_TIME,
			v.V_RSTART_DATE,
		    v.V_REND_DATE,
		    v.V_WORKING_DAY,
			v.SERVICE_CODE,
			v.V_MAX_AMNT,
			v.V_REG_AMNT,
			v.V_UPLOAD_FILE_PATH,
			v.V_INFO,
			s.service_type as service_type
		    FROM volunteer v
		    INNER JOIN service_type_table s
			ON s.service_code = v.service_code
		    WHERE v.V_NO =#{v_no}
		]]>
	</select>

	<select id="selectVNoCenterReg" resultMap="vNoCenterRegResult">
      <![CDATA[
        select max(v_no) as v_no from volunteer
      ]]>
	</select>

	<insert id="insertCenterReg" parameterType="centerRegVO">
		<![CDATA[
		 insert into volunteer(C_ID,V_TITLE,V_START_DATE,V_END_DATE,V_START_TIME,V_LAST_TIME,V_RSTART_DATE,V_REND_DATE,V_WORKING_DAY,SERVICE_CODE,V_REG_AMNT,V_MAX_AMNT,V_STATE,V_UPLOAD_FILE_PATH,V_INFO,CREATED_ID,CREATED_DATE)
		 values(#{uId},#{vTitle},#{vStartDate},#{vEndDate},#{vStartTime},#{vLastTime},#{vRStartDate},#{vREndDate},#{vWorkingDay},#{vServiceCode},#{vRegAmnt},0,1,#{vUploadFilePath},#{vInfo},#{uId},SYSDATE)
		]]>
	</insert>

	<update id="updateCenterReg" parameterType="centerRegVO">
		<![CDATA[
		 update volunteer set
		 V_TITLE = #{vTitle},
		 V_START_DATE = #{vStartDate},
		 V_END_DATE = #{vEndDate},
		 V_START_TIME = #{vStartTime},
		 V_LAST_TIME = #{vLastTime},
		 V_RSTART_DATE = #{vRStartDate},
		 V_REND_DATE = #{vREndDate},
		 V_WORKING_DAY = #{vWorkingDay},
		 SERVICE_CODE = #{vServiceCode},
		 V_REG_AMNT = #{vRegAmnt},
		 V_INFO = #{vInfo},
		 UPDATED_ID = #{uId},
         UPDATED_DATE = SYSDATE
         where v_no = #{v_no}
		]]>
	</update>

	<select id="selectCenterRegIdList" parameterType="String" resultMap="listIdCenterRegResult">
		<![CDATA[
		   SELECT
			C_NAME, C_ADDR1, C_ADDR2
			FROM CENTER_MNG_TABLE
		    WHERE C_ID = #{centerId}
		]]>
	</select>


<!--	<update id="updateMember" parameterType="memberVO">-->
<!--     <![CDATA[-->
<!--	     update t_member-->
<!--	     set pwd=#{pwd}, name=#{name}, email=#{email}-->
<!--	     where-->
<!--	     id=#{id}-->
<!--      ]]>-->
<!--	</update>-->

<!--	<delete id="deleteMember" parameterType="String">-->
<!--	<![CDATA[-->
<!--	   delete from  t_member-->
<!--	   where-->
<!--	   id=#{id}-->
<!--	]]>-->
<!--	</delete>-->
<!--	<select id="loginById" resultType="memberVO"-->
<!--		parameterType="memberVO">-->
<!--	<![CDATA[-->
<!--		select * from t_member	-->
<!--		where id=#{id} and pwd=#{pwd}		-->
<!--	]]>-->
<!--	</select>-->

</mapper>