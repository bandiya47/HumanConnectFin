<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="dc.human.gbnb.humanConnect.dao.MemberDAO">
	<!-- memberVO 객체와 매핑될 resultMap 정의 -->
	<resultMap id="memResult" type="memberVO">
		<!-- 데이터베이스 컬럼과 memberVO 객체의 프로퍼티 매핑 -->
		<!--테이블 컬럼명과 동일하다.-->
		<result property="u_id" column="u_id" />
		<result property="u_name" column="u_name" />
		<result property="u_sex" column="u_sex" />
		<result property="u_bdate" column="u_bdate" />
		<result property="u_pwd" column="u_pwd" />
		<result property="u_addr1" column="u_addr1" />
		<result property="u_addr2" column="u_addr2" />
		<result property="u_email" column="u_email" />
		<result property="u_phone" column="u_phone" />

	</resultMap>


	<!-- 모든 회원 목록을 조회하는 쿼리 -->
	<select id="selectAllMemberList" resultMap="memResult">
      <![CDATA[
        select * from volunteer_user order by u_name desc
      ]]>
	</select>

	<!-- 새로운 회원을 추가하는 쿼리 -->
	<insert id="insertMember" parameterType="memberVO">
		<![CDATA[
		 insert into volunteer_user(u_id,u_name, u_pwd, u_email, u_phone )
		 values(#{u_id}, #{u_name}, #{u_pwd}, #{u_email}, #{u_phone})
		]]>
	</insert>


	<!-- 회원 정보를 업데이트하는 쿼리 -->
	<update id="updateMember" parameterType="memberVO">
     <![CDATA[
	     update volunteer_user
	     set pwd=#{u_pwd}, name=#{u_name}, email=#{u_email}
	     where
	     id=#{id}
      ]]>
	</update>

	<!-- 회원을 삭제하는 쿼리 -->
	<delete id="deleteMember" parameterType="String">
	<![CDATA[
	   delete from  volunteer_user
	   where
	   id=#{u_id}
	]]>
	</delete>

	<!-- 회원 로그인을 처리하는 쿼리 -->
	<select id="loginById" resultType="memberVO"
		parameterType="memberVO">
	<![CDATA[
		select * from volunteer_user
		where u_id=#{u_id} and u_pwd=#{u_pwd}
	]]>
	</select>

</mapper>